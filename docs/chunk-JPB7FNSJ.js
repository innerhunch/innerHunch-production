import{a as R,b as m,c as z,d as D,e as j,f as B,g as H,h as J,i as Y,j as $,l as K,n as Q}from"./chunk-P6JN6CVS.js";import{a as G,b as A}from"./chunk-U5BXTOFB.js";import{D as d,F as b,G as p,K as t,L as n,M as s,N as y,O as M,P as U,Q as S,T as x,U as a,aa as N,ga as I,ia as k,n as P,p as w,pa as T,q as v,qa as V,ua as L,va as q,w as l,y as O,z as E}from"./chunk-2NQ3PINK.js";function ee(i,r){i&1&&(t(0,"small"),a(1," First Name is required (min 3 characters) "),n())}function te(i,r){i&1&&(t(0,"small"),a(1," Middle Name is required (min 3 characters) "),n())}function ne(i,r){i&1&&(t(0,"small"),a(1," Last Name is required (min 3 characters) "),n())}function ie(i,r){i&1&&(t(0,"small"),a(1," Username is required (min 4 characters) "),n())}function re(i,r){i&1&&(t(0,"small"),a(1," Please enter a valid email "),n())}function oe(i,r){i&1&&(t(0,"small"),a(1," Enter a valid 10-digit phone number "),n())}function ae(i,r){i&1&&(y(0),s(1,"i",30),M())}function le(i,r){i&1&&s(0,"i",31)}function se(i,r){i&1&&(t(0,"small"),a(1," Password must be at least 6 characters "),n())}function me(i,r){i&1&&(y(0),s(1,"i",30),M())}function pe(i,r){i&1&&s(0,"i",31)}function de(i,r){i&1&&(t(0,"small"),a(1," Passwords do not match "),n())}var W=class i{constructor(r){this.fb=r;this.signupForm=this.fb.group({firstName:["",[m.required,m.minLength(3)]],middleName:[""],lastName:["",[m.required,m.minLength(3)]],username:["",[m.required,m.minLength(4)]],email:["",[m.required,m.email]],phone:["",[m.required,m.pattern(/^[0-9]{10}$/)]],dob:["",m.required],gender:["",m.required],password:["",[m.required,m.minLength(6)]],confirmPassword:["",m.required]},{validators:this.passwordMatchValidator})}signupForm;apiService=P(q);router=P(T);showPassword=!1;showConfirmPassword=!1;passwordMatchValidator(r){return r.get("password")?.value===r.get("confirmPassword")?.value?null:{mismatch:!0}}isLoading=!1;errorMessage="";successMessage="";onSubmit(){if(this.signupForm.markAllAsTouched(),this.signupForm.valid){this.isLoading=!0,this.errorMessage="",this.successMessage="";let r={firstName:this.signupForm.value.firstName,middleName:this.signupForm.value.middleName,lastName:this.signupForm.value.lastName,username:this.signupForm.value.username,email:this.signupForm.value.email,phone:this.signupForm.value.phone,dob:this.signupForm.value.dob,password:this.signupForm.value.password};this.apiService.signup(r).subscribe({next:o=>{this.isLoading=!1,this.successMessage=o.message||"Signup successful!",console.log("Response:",o),o.user&&localStorage.setItem("currentUser",JSON.stringify(o.user)),o.token&&localStorage.setItem("authToken",o.token),setTimeout(()=>{this.router.navigate(["/articles"])},1e3)},error:o=>{this.isLoading=!1,o.error&&typeof o.error=="string"?this.errorMessage=o.error:o.error&&o.error.message?this.errorMessage=o.error.message:this.errorMessage="Signup failed. Please try again.",console.error("Login error:",o.error)}})}}togglePasswordVisibility(){this.showPassword=!this.showPassword}toggleConfirmPasswordVisibility(){this.showConfirmPassword=!this.showConfirmPassword}static \u0275fac=function(o){return new(o||i)(O(K))};static \u0275cmp=E({type:i,selectors:[["app-user-signup"]],decls:61,vars:20,consts:[["eyeOff1",""],["eyeOff2",""],[1,"auth-container"],[1,"auth-card"],[1,"auth-title"],[3,"ngSubmit","formGroup"],[1,"form-group"],["type","text","formControlName","firstName","placeholder","First Name"],[4,"ngIf"],["type","text","formControlName","middleName","placeholder","Middle Name"],["type","text","formControlName","lastName","placeholder","Last Name"],["type","text","formControlName","username","placeholder","Username"],["type","email","formControlName","email","placeholder","Email"],["type","text","formControlName","phone","placeholder","Phone (10 digits)"],["for","birthday",1,"form-label",2,"font-size","12px","margin-left","5px","color","grey"],["id","birthday","type","date","formControlName","dob"],["formControlName","gender"],["value","","disabled","","selected",""],["value","male"],["value","female"],["value","other"],[1,"form-group","password-field"],[1,"password-input-wrapper"],["formControlName","password","placeholder","Password",3,"type"],["type","button",1,"toggle-password",3,"click"],[4,"ngIf","ngIfElse"],["formControlName","confirmPassword","placeholder","Confirm Password",3,"type"],["type","submit",3,"disabled"],[1,"switch-auth"],["routerLink","/login"],[1,"fa-solid","fa-eye-slash"],[1,"fa-solid","fa-eye"]],template:function(o,e){if(o&1){let u=U();s(0,"app-navbar"),t(1,"div",2)(2,"div",3)(3,"h2",4),a(4,"Create Account"),n(),t(5,"form",5),S("ngSubmit",function(){return w(u),v(e.onSubmit())}),t(6,"div",6),s(7,"input",7),d(8,ee,2,0,"small",8),n(),t(9,"div",6),s(10,"input",9),d(11,te,2,0,"small",8),n(),t(12,"div",6),s(13,"input",10),d(14,ne,2,0,"small",8),n(),t(15,"div",6),s(16,"input",11),d(17,ie,2,0,"small",8),n(),t(18,"div",6),s(19,"input",12),d(20,re,2,0,"small",8),n(),t(21,"div",6),s(22,"input",13),d(23,oe,2,0,"small",8),n(),t(24,"div",6)(25,"label",14),a(26,"Birthday"),n(),s(27,"input",15),n(),t(28,"div",6)(29,"select",16)(30,"option",17),a(31,"Select Gender"),n(),t(32,"option",18),a(33,"Male"),n(),t(34,"option",19),a(35,"Female"),n(),t(36,"option",20),a(37,"Other"),n()()(),t(38,"div",21)(39,"div",22),s(40,"input",23),t(41,"div",24),S("click",function(){return w(u),v(e.togglePasswordVisibility())}),d(42,ae,2,0,"ng-container",25)(43,le,1,0,"ng-template",null,0,N),n()(),d(45,se,2,0,"small",8),n(),t(46,"div",21)(47,"div",22),s(48,"input",26),t(49,"div",24),S("click",function(){return w(u),v(e.toggleConfirmPasswordVisibility())}),d(50,me,2,0,"ng-container",25)(51,pe,1,0,"ng-template",null,1,N),n()(),d(53,de,2,0,"small",8),n(),t(54,"button",27),a(55,"Sign Up"),n()(),t(56,"p",28),a(57," Already have an account? "),t(58,"a",29),a(59,"Login here"),n()()()(),s(60,"app-footer")}if(o&2){let u,g,c,f,h,_,C,F,X=x(44),Z=x(52);l(5),p("formGroup",e.signupForm),l(3),p("ngIf",((u=e.signupForm.get("firstName"))==null?null:u.touched)&&((u=e.signupForm.get("firstName"))==null?null:u.invalid)),l(3),p("ngIf",((g=e.signupForm.get("middleName"))==null?null:g.touched)&&((g=e.signupForm.get("middleName"))==null?null:g.invalid)),l(3),p("ngIf",((c=e.signupForm.get("lastName"))==null?null:c.touched)&&((c=e.signupForm.get("lastName"))==null?null:c.invalid)),l(3),p("ngIf",((f=e.signupForm.get("username"))==null?null:f.touched)&&((f=e.signupForm.get("username"))==null?null:f.invalid)),l(3),p("ngIf",((h=e.signupForm.get("email"))==null?null:h.touched)&&((h=e.signupForm.get("email"))==null?null:h.invalid)),l(3),p("ngIf",((_=e.signupForm.get("phone"))==null?null:_.touched)&&((_=e.signupForm.get("phone"))==null?null:_.invalid)),l(17),p("type",e.showPassword?"text":"password"),l(),b("aria-pressed",e.showPassword)("aria-label",e.showPassword?"Hide password":"Show password"),l(),p("ngIf",!e.showPassword)("ngIfElse",X),l(3),p("ngIf",((C=e.signupForm.get("password"))==null?null:C.touched)&&((C=e.signupForm.get("password"))==null?null:C.invalid)),l(3),p("type",e.showConfirmPassword?"text":"password"),l(),b("aria-pressed",e.showConfirmPassword)("aria-label",e.showConfirmPassword?"Hide password":"Show password"),l(),p("ngIf",!e.showConfirmPassword)("ngIfElse",Z),l(3),p("ngIf",e.signupForm.hasError("mismatch")&&((F=e.signupForm.get("confirmPassword"))==null?null:F.touched)),l(),p("disabled",e.signupForm.invalid)}},dependencies:[k,I,Q,j,Y,$,R,J,z,D,B,H,G,A,L,V],styles:[".auth-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;margin:8vh 0;font-family:var(--app-headingFont)}.auth-card[_ngcontent-%COMP%]{background:#fff;padding:30px;width:400px;border-radius:12px;box-shadow:var(--app-box-shadow)}.auth-title[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;color:#333}form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:15px}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid #ddd;border-radius:8px;font-size:14px;outline:none;transition:border-color .3s ease}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{border-color:#2575fc}form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:none;height:70px}form[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:red;font-size:12px}button[_ngcontent-%COMP%]{width:100%;padding:12px;background:var(--app-lightGreen-color);color:#fff;border:none;border-radius:8px;font-size:16px;cursor:pointer;transition:background .3s ease}button[_ngcontent-%COMP%]:hover:enabled{background:var(--app-darkGreen-color)}button[_ngcontent-%COMP%]:disabled{background:#aaa;cursor:not-allowed}.switch-auth[_ngcontent-%COMP%]{text-align:center;margin-top:15px;font-size:14px}.switch-auth[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--app-darkGreen-color);text-decoration:none;font-weight:700}.switch-auth[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.password-field[_ngcontent-%COMP%]   .password-input-wrapper[_ngcontent-%COMP%]{position:relative}.password-input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-right:44px}.toggle-password[_ngcontent-%COMP%]{position:absolute;right:8px;top:50%;transform:translateY(-50%);border:none;background:transparent;cursor:pointer;padding:6px;border-radius:6px;display:inline-flex;align-items:center;justify-content:center}.toggle-password[_ngcontent-%COMP%]:focus{outline:2px solid rgba(0,120,212,.25);outline-offset:2px}"]})};export{W as UserSignupComponent};
